#!/usr/bin/env bash

if test ! $(which brew); then
  echo "Installing homebrew..."
  /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

echo "Updating brew..."
brew update

echo "Installing brew packages..."
brew tap caskroom/cask
brew install fish mongodb 
brew cask install iterm2 shiftit robomongo transmission

brew upgrade

echo "Setting up fish as the default shell..."
if ! grep -Fxq "/usr/local/bin/fish" /etc/shells; then
  echo "/usr/local/bin/fish" | sudo tee -a /etc/shells
fi

chsh -s /usr/local/bin/fish

echo "Configuring iterm2..."
defaults write com.googlecode.iterm2.plist PrefsCustomFolder -string "~/.dotfiles"
defaults write com.googlecode.iterm2.plist LoadPrefsFromCustomFolder -bool true


echo "Linking dotfiles..."
ln -sf ~/.dotfiles/.bash_profile ~/.bash_profile
ln -sf ~/.dotfiles/.gitconfig ~/.gitconfig

source ~/.bash_profile
